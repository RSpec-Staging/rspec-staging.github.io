<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]<!--><html class="no-js" lang="en"><!--<![endif]--><head><meta charset="UTF-8" /><meta content="width=device-width, initial-scale=1" name="viewport" /><meta property="og:title" /><meta content="https://rspec.info/features/3-13/rspec-expectations/built-in-matchers/respond-to/" property="og:url" /><meta content="https://rspec.info/images/logo_ogp.png" property="og:image" /><meta content="summary" name="twitter:card" /><meta content="@rspec" name="twitter:site" /><title></title><link href="/stylesheets/pages/features.css" rel="stylesheet" /><link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" /><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet" type="text/css" /><link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css" /><link href="/blog/feed.xml" rel="alternate" type="application/atom+xml" /></head><body class="features"><header><nav><h1><img src="/images/logo.png" alt="Logo" /><a href="/">RSpec</a></h1><input class="hamburger-toggle" type="checkbox" /><div class="hamburger-icon"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div><ul class="menu"><li><a href="/about">About</a></li><li><a href="/documentation">Documentation</a></li><li><a href="/blog">Blog</a></li><li><a href="/upgrading-from-rspec-2">Upgrade</a></li><li><a href="/help">Get Help</a></li><li><a href="/contributing">Contributing</a></li></ul></nav></header><nav class="top-nav-bar" role="navigation"><ul><li>Library:</li><li><a class="title" href="/features/3-13/rspec-expectations">RSpec Expectations</a><ul aria-haspopup="true" aria-label="submenu"><li><a href="/features/3-13/rspec-core">RSpec Core</a></li><li class="current"><a href="/features/3-13/rspec-expectations">RSpec Expectations</a></li><li><a href="/features/3-13/rspec-mocks">RSpec Mocks</a></li><li><a href="/features/6-1/rspec-rails">RSpec Rails</a></li></ul></li><li>Version:</li><li><a class="title" href="/features/3-13/rspec-expectations">3.13</a><ul aria-haspopup="true" aria-label="submenu"><li><a href="/features/3-12/rspec-expectations">3.12</a></li><li class="current"><a href="/features/3-13/rspec-expectations">3.13</a></li></ul></li></ul></nav><section><nav><ul><li><a href="/features/3-13/rspec-expectations/built-in-matchers/">Built in matchers</a><ul class="open"><li><a href="/features/3-13/rspec-expectations/built-in-matchers/equality/"> Equality matchers</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/comparisons/"> Comparison matchers</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/predicates/"> Predicate matchers</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/types/"> Type matchers</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/all/"> `all` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/be/"> `be` matchers</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/be-within/"> `be_within` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/exist/"> `exist` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/change/"> `change` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/contain-exactly/"> `contain_exactly` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/cover/"> `cover` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/end-with/"> `end_with` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/exist/"> `exist` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/have-attributes/"> `have_attributes` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/include/"> `include` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/match/"> `match` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/raise-error/"> `raise_error` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/respond-to/"> `respond_to` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/satisfy/"> `satisfy` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/start-with/"> `start_with` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/throw-symbol/"> `throw_symbol` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/yield/"> `yield` matchers</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/output/"> `output` matcher</a></li></ul></li><li><a href="/features/3-13/rspec-expectations/custom-matchers/">Custom matchers</a><ul><li><a href="/features/3-13/rspec-expectations/custom-matchers/define-matcher/"> Defining a custom matcher</a></li><li><a href="/features/3-13/rspec-expectations/custom-matchers/define-diffable-matcher/"> Defining a diffable matcher</a></li><li><a href="/features/3-13/rspec-expectations/custom-matchers/define-matcher-with-fluent-interface/"> Defining a matcher with fluent interface</a></li><li><a href="/features/3-13/rspec-expectations/custom-matchers/access-running-example/"> Access the running example</a></li><li><a href="/features/3-13/rspec-expectations/custom-matchers/define-matcher-outside-rspec/"> Defining a matcher outside rspec</a></li><li><a href="/features/3-13/rspec-expectations/custom-matchers/define-block-matcher/"> Defining a matcher supporting block expectations</a></li></ul></li><li><a href="/features/3-13/rspec-expectations/aggregating-failures/">Aggregating failures</a></li><li><a href="/features/3-13/rspec-expectations/composing-matchers/">Composing matchers</a></li><li><a href="/features/3-13/rspec-expectations/compound-expectations/">Compound expectations</a></li><li><a href="/features/3-13/rspec-expectations/define-negated-matcher/">Define negated matcher</a></li><li><a href="/features/3-13/rspec-expectations/customized-message/">Customized message</a></li><li><a href="/features/3-13/rspec-expectations/diffing/">Diffing</a></li><li><a href="/features/3-13/rspec-expectations/implicit-docstrings/">Implicit docstrings</a></li><li><a href="/features/3-13/rspec-expectations/syntax-configuration/">Syntax configuration</a></li><li><a href="/features/3-13/rspec-expectations/test-frameworks/">Test frameworks</a><ul><li><a href="/features/3-13/rspec-expectations/test-frameworks/minitest/"> Minitest integration</a></li></ul></li></ul></nav><article><h1><code>respond_to</code> matcher</h1>

<p>Use the <code>respond_to</code> matcher to specify details of an object&rsquo;s interface. In its most basic form:</p>
<div class="highlight"><pre class="highlight ruby"><code>    <span class="n">expect</span><span class="p">(</span><span class="n">obj</span><span class="p">).</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:foo</span><span class="p">)</span> <span class="c1"># pass if obj.respond_to?(:foo)</span>
</code></pre></div>
<p>You can specify that an object responds to multiple messages in a single statement with
  multiple arguments passed to the matcher:</p>
<div class="highlight"><pre class="highlight ruby"><code>    <span class="n">expect</span><span class="p">(</span><span class="n">obj</span><span class="p">).</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:foo</span><span class="p">,</span> <span class="ss">:bar</span><span class="p">)</span> <span class="c1"># passes if obj.respond_to?(:foo) &amp;&amp; obj.respond_to?(:bar)</span>
</code></pre></div>
<p>If the number of arguments accepted by the method is important to you, you can specify
  that as well:</p>
<div class="highlight"><pre class="highlight ruby"><code>    <span class="n">expect</span><span class="p">(</span><span class="n">obj</span><span class="p">).</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:foo</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nf">argument</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">obj</span><span class="p">).</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:bar</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="nf">arguments</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">obj</span><span class="p">).</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:baz</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">2</span><span class="p">).</span><span class="nf">arguments</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">obj</span><span class="p">).</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:xyz</span><span class="p">).</span><span class="nf">with_unlimited_arguments</span>
</code></pre></div>
<p>If your Ruby version supports keyword arguments, you can specify a list of keywords accepted
  by the method.</p>
<div class="highlight"><pre class="highlight ruby"><code>    <span class="n">expect</span><span class="p">(</span><span class="n">obj</span><span class="p">).</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:foo</span><span class="p">).</span><span class="nf">with_keywords</span><span class="p">(</span><span class="ss">:ichi</span><span class="p">,</span> <span class="ss">:ni</span><span class="p">)</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">obj</span><span class="p">).</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:bar</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="nf">arguments</span><span class="p">.</span><span class="nf">and_keywords</span><span class="p">(</span><span class="ss">:san</span><span class="p">,</span> <span class="ss">:yon</span><span class="p">)</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">obj</span><span class="p">).</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:baz</span><span class="p">).</span><span class="nf">with_arbitrary_keywords</span>
</code></pre></div>
<p>Note that this matcher relies entirely upon <code>#respond_to?</code>.  If an object dynamically responds
  to a message via <code>#method_missing</code>, but does not indicate this via <code>#respond_to?</code>, then this
  matcher will give you false results.</p>

<h2>Basic usage</h2>

<p><em>Given</em> a file named &ldquo;respond<em>to</em>matcher_spec.rb&rdquo; with:</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="s2">"a string"</span> <span class="k">do</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:length</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:hash</span><span class="p">,</span> <span class="ss">:class</span><span class="p">,</span> <span class="ss">:to_s</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:to_model</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:compact</span><span class="p">,</span> <span class="ss">:flatten</span><span class="p">)</span> <span class="p">}</span>

  <span class="c1"># deliberate failures</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:to_model</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:compact</span><span class="p">,</span> <span class="ss">:flatten</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:length</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:hash</span><span class="p">,</span> <span class="ss">:class</span><span class="p">,</span> <span class="ss">:to_s</span><span class="p">)</span> <span class="p">}</span>

  <span class="c1"># mixed examples--String responds to :length but not :flatten</span>
  <span class="c1"># both specs should fail</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:length</span><span class="p">,</span> <span class="ss">:flatten</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:length</span><span class="p">,</span> <span class="ss">:flatten</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<p><em>When</em> I run <code>rspec respond_to_matcher_spec.rb</code></p>

<p><em>Then</em> the output should contain all of these:</p>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>10 examples, 6 failures</td>
</tr>
<tr>
<td>expected &ldquo;a string&rdquo; to respond to :to_model</td>
</tr>
<tr>
<td>expected &ldquo;a string&rdquo; to respond to :compact, :flatten</td>
</tr>
<tr>
<td>expected &ldquo;a string&rdquo; not to respond to :length</td>
</tr>
<tr>
<td>expected &ldquo;a string&rdquo; not to respond to :hash, :class, :to_s</td>
</tr>
<tr>
<td>expected &ldquo;a string&rdquo; to respond to :flatten</td>
</tr>
<tr>
<td>expected &ldquo;a string&rdquo; not to respond to :length</td>
</tr>
</tbody></table>

<h2>Specify arguments</h2>

<p><em>Given</em> a file named &ldquo;respond<em>to</em>matcher<em>argument</em>checking_spec.rb&rdquo; with:</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="mi">7</span> <span class="k">do</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:zero?</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nf">arguments</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:zero?</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nf">argument</span> <span class="p">}</span>

  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:between?</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="nf">arguments</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:between?</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">7</span><span class="p">).</span><span class="nf">arguments</span> <span class="p">}</span>

  <span class="c1"># deliberate failures</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:zero?</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nf">argument</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:zero?</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nf">arguments</span> <span class="p">}</span>

  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:between?</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">7</span><span class="p">).</span><span class="nf">arguments</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:between?</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="nf">arguments</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<p><em>When</em> I run <code>rspec respond_to_matcher_argument_checking_spec.rb</code></p>

<p><em>Then</em> the output should contain all of these:</p>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>8 examples, 4 failures</td>
</tr>
<tr>
<td>expected 7 to respond to :zero? with 1 argument</td>
</tr>
<tr>
<td>expected 7 not to respond to :zero? with 0 arguments</td>
</tr>
<tr>
<td>expected 7 to respond to :between? with 7 arguments</td>
</tr>
<tr>
<td>expected 7 not to respond to :between? with 2 arguments</td>
</tr>
</tbody></table>

<h2>Specify arguments range</h2>

<p><em>Given</em> a file named &ldquo;respond<em>to</em>matcher<em>argument</em>range<em>checking</em>spec.rb&rdquo; with:</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">MyClass</span>
  <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">options</span> <span class="o">=</span> <span class="p">{})</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">inspect</span>
    <span class="s1">'my_object'</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">MyClass</span> <span class="k">do</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:build</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">2</span><span class="p">).</span><span class="nf">arguments</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:build</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">0</span><span class="o">..</span><span class="mi">1</span><span class="p">).</span><span class="nf">arguments</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:build</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">2</span><span class="o">..</span><span class="mi">3</span><span class="p">).</span><span class="nf">arguments</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:build</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">0</span><span class="o">..</span><span class="mi">3</span><span class="p">).</span><span class="nf">arguments</span> <span class="p">}</span>

  <span class="c1"># deliberate failures</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:build</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">2</span><span class="p">).</span><span class="nf">arguments</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:build</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">0</span><span class="o">..</span><span class="mi">1</span><span class="p">).</span><span class="nf">arguments</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:build</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">2</span><span class="o">..</span><span class="mi">3</span><span class="p">).</span><span class="nf">arguments</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:build</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">0</span><span class="o">..</span><span class="mi">3</span><span class="p">).</span><span class="nf">arguments</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<p><em>When</em> I run <code>rspec respond_to_matcher_argument_range_checking_spec.rb</code></p>

<p><em>Then</em> the output should contain all of these:</p>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>8 examples, 4 failures</td>
</tr>
<tr>
<td>expected my_object not to respond to :build with 1..2 arguments</td>
</tr>
<tr>
<td>expected my_object to respond to :build with 0..1 arguments</td>
</tr>
<tr>
<td>expected my_object to respond to :build with 2..3 arguments</td>
</tr>
<tr>
<td>expected my_object to respond to :build with 0..3 arguments</td>
</tr>
</tbody></table>

<h2>Specify unlimited arguments</h2>

<p><em>Given</em> a file named &ldquo;respond<em>to</em>matcher<em>unlimited</em>argument<em>checking</em>spec.rb&rdquo; with:</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">MyClass</span>
  <span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="n">message</span> <span class="o">=</span> <span class="s1">'Hello'</span><span class="p">,</span> <span class="o">*</span><span class="n">people</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">hail</span><span class="p">(</span><span class="n">person</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">inspect</span>
    <span class="s1">'my_object'</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">MyClass</span> <span class="k">do</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:greet</span><span class="p">).</span><span class="nf">with_unlimited_arguments</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:greet</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nf">argument</span><span class="p">.</span><span class="nf">and_unlimited_arguments</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:hail</span><span class="p">).</span><span class="nf">with_unlimited_arguments</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:hail</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nf">argument</span><span class="p">.</span><span class="nf">and_unlimited_arguments</span> <span class="p">}</span>

  <span class="c1"># deliberate failures</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:greet</span><span class="p">).</span><span class="nf">with_unlimited_arguments</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:greet</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nf">argument</span><span class="p">.</span><span class="nf">and_unlimited_arguments</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:hail</span><span class="p">).</span><span class="nf">with_unlimited_arguments</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:hail</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nf">argument</span><span class="p">.</span><span class="nf">and_unlimited_arguments</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<p><em>When</em> I run <code>rspec respond_to_matcher_unlimited_argument_checking_spec.rb</code></p>

<p><em>Then</em> the output should contain all of these:</p>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>8 examples, 4 failures</td>
</tr>
<tr>
<td>expected my_object not to respond to :greet with unlimited arguments</td>
</tr>
<tr>
<td>expected my_object not to respond to :greet with 1 argument and unlimited arguments</td>
</tr>
<tr>
<td>expected my_object to respond to :hail with unlimited arguments</td>
</tr>
<tr>
<td>expected my_object to respond to :hail with 1 argument and unlimited arguments</td>
</tr>
</tbody></table>

<h2>Specify keywords</h2>

<p><em>Given</em> a file named &ldquo;respond<em>to</em>matcher<em>keyword</em>checking_spec.rb&rdquo; with:</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">MyClass</span>
  <span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="nb">name</span> <span class="o">=</span> <span class="s1">'id'</span><span class="p">,</span> <span class="ss">limit: </span><span class="mi">1_000</span><span class="p">,</span> <span class="ss">offset: </span><span class="mi">0</span><span class="p">)</span>
    <span class="p">[]</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">inspect</span>
    <span class="s1">'my_object'</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">MyClass</span> <span class="k">do</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:find</span><span class="p">).</span><span class="nf">with_keywords</span><span class="p">(</span><span class="ss">:limit</span><span class="p">,</span> <span class="ss">:offset</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:find</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nf">argument</span><span class="p">.</span><span class="nf">and_keywords</span><span class="p">(</span><span class="ss">:limit</span><span class="p">,</span> <span class="ss">:offset</span><span class="p">)</span> <span class="p">}</span>

  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:find</span><span class="p">).</span><span class="nf">with_keywords</span><span class="p">(</span><span class="ss">:limit</span><span class="p">,</span> <span class="ss">:offset</span><span class="p">,</span> <span class="ss">:page</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:find</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nf">argument</span><span class="p">.</span><span class="nf">and_keywords</span><span class="p">(</span><span class="ss">:limit</span><span class="p">,</span> <span class="ss">:offset</span><span class="p">,</span> <span class="ss">:page</span><span class="p">)</span> <span class="p">}</span>

  <span class="c1"># deliberate failures</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:find</span><span class="p">).</span><span class="nf">with_keywords</span><span class="p">(</span><span class="ss">:limit</span><span class="p">,</span> <span class="ss">:offset</span><span class="p">,</span> <span class="ss">:page</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:find</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nf">argument</span><span class="p">.</span><span class="nf">and_keywords</span><span class="p">(</span><span class="ss">:limit</span><span class="p">,</span> <span class="ss">:offset</span><span class="p">,</span> <span class="ss">:page</span><span class="p">)</span> <span class="p">}</span>

  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:find</span><span class="p">).</span><span class="nf">with_keywords</span><span class="p">(</span><span class="ss">:limit</span><span class="p">,</span> <span class="ss">:offset</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:find</span><span class="p">).</span><span class="nf">with</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nf">argument</span><span class="p">.</span><span class="nf">and_keywords</span><span class="p">(</span><span class="ss">:limit</span><span class="p">,</span> <span class="ss">:offset</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<p><em>When</em> I run <code>rspec respond_to_matcher_keyword_checking_spec.rb</code></p>

<p><em>Then</em> the output should contain all of these:</p>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>8 examples, 4 failures</td>
</tr>
<tr>
<td>expected my_object to respond to :find with keywords :limit, :offset, and :page</td>
</tr>
<tr>
<td>expected my_object to respond to :find with 1 argument and keywords :limit, :offset, and :page</td>
</tr>
<tr>
<td>expected my_object not to respond to :find with keywords :limit and :offset</td>
</tr>
<tr>
<td>expected my_object not to respond to :find with 1 argument and keywords :limit and :offset</td>
</tr>
</tbody></table>

<h2>Specify any keywords</h2>

<p><em>Given</em> a file named &ldquo;respond<em>to</em>matcher<em>any</em>keywords<em>checking</em>spec.rb&rdquo; with:</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">MyClass</span>
  <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="ss">name: </span><span class="s1">'object'</span><span class="p">,</span> <span class="o">**</span><span class="n">opts</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="ss">name: </span><span class="s1">'object'</span><span class="p">,</span> <span class="ss">type: </span><span class="no">String</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">inspect</span>
    <span class="s1">'my_object'</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">MyClass</span> <span class="k">do</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:build</span><span class="p">).</span><span class="nf">with_any_keywords</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:build</span><span class="p">).</span><span class="nf">with_keywords</span><span class="p">(</span><span class="ss">:name</span><span class="p">).</span><span class="nf">and_any_keywords</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:create</span><span class="p">).</span><span class="nf">with_any_keywords</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:create</span><span class="p">).</span><span class="nf">with_keywords</span><span class="p">(</span><span class="ss">:name</span><span class="p">).</span><span class="nf">and_any_keywords</span> <span class="p">}</span>

  <span class="c1"># deliberate failures</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:build</span><span class="p">).</span><span class="nf">with_any_keywords</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:build</span><span class="p">).</span><span class="nf">with_keywords</span><span class="p">(</span><span class="ss">:name</span><span class="p">).</span><span class="nf">and_any_keywords</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:create</span><span class="p">).</span><span class="nf">with_any_keywords</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:create</span><span class="p">).</span><span class="nf">with_keywords</span><span class="p">(</span><span class="ss">:name</span><span class="p">).</span><span class="nf">and_any_keywords</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<p><em>When</em> I run <code>rspec respond_to_matcher_any_keywords_checking_spec.rb</code></p>

<p><em>Then</em> the output should contain all of these:</p>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>8 examples, 4 failures</td>
</tr>
<tr>
<td>expected my_object not to respond to :build with any keywords</td>
</tr>
<tr>
<td>expected my_object not to respond to :build with keyword :name and any keywords</td>
</tr>
<tr>
<td>expected my_object to respond to :create with any keywords</td>
</tr>
<tr>
<td>expected my_object to respond to :create with keyword :name and any keywords</td>
</tr>
</tbody></table>

<h2>Specify required keywords</h2>

<p><em>Given</em> a file named &ldquo;respond<em>to</em>matcher<em>required</em>keyword<em>checking</em>spec.rb&rdquo; with:</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">MyClass</span>
  <span class="k">def</span> <span class="nf">plant</span><span class="p">(</span><span class="n">seed</span><span class="p">:,</span> <span class="ss">fertilizer: </span><span class="kp">nil</span><span class="p">,</span> <span class="ss">water: </span><span class="s1">'daily'</span><span class="p">)</span>
    <span class="p">[]</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">inspect</span>
    <span class="s1">'my_object'</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">MyClass</span> <span class="k">do</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:plant</span><span class="p">).</span><span class="nf">with_keywords</span><span class="p">(</span><span class="ss">:seed</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:plant</span><span class="p">).</span><span class="nf">with_keywords</span><span class="p">(</span><span class="ss">:seed</span><span class="p">,</span> <span class="ss">:fertilizer</span><span class="p">,</span> <span class="ss">:water</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:plant</span><span class="p">).</span><span class="nf">with_keywords</span><span class="p">(</span><span class="ss">:fertilizer</span><span class="p">,</span> <span class="ss">:water</span><span class="p">)</span> <span class="p">}</span>

  <span class="c1"># deliberate failures</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:plant</span><span class="p">).</span><span class="nf">with_keywords</span><span class="p">(</span><span class="ss">:seed</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:plant</span><span class="p">).</span><span class="nf">with_keywords</span><span class="p">(</span><span class="ss">:seed</span><span class="p">,</span> <span class="ss">:fertilizer</span><span class="p">,</span> <span class="ss">:water</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:plant</span><span class="p">).</span><span class="nf">with_keywords</span><span class="p">(</span><span class="ss">:fertilizer</span><span class="p">,</span> <span class="ss">:water</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<p><em>When</em> I run <code>rspec respond_to_matcher_required_keyword_checking_spec.rb</code></p>

<p><em>Then</em> the output should contain all of these:</p>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>6 examples, 3 failures</td>
</tr>
<tr>
<td>expected my_object not to respond to :plant with keyword :seed</td>
</tr>
<tr>
<td>expected my_object not to respond to :plant with keywords :seed, :fertilizer, and :water</td>
</tr>
<tr>
<td>expected my_object to respond to :plant with keywords :fertilizer and :water</td>
</tr>
</tbody></table>
</article></section><footer><div>Created with the assistance of Ninefold<img src="/images/brutus-half.png" alt="Brutus" /></div><br /><a href="https://dnsimple.link/resolving-rspec" target="_blank">Resolving with<br /><img src="https://cdn.dnsimple.com/assets/resolving-with-us/logo-dark.png" alt="DNSimple" style="width:100px;" /></a></footer></body><script src="/javascripts/asciinema-player.js"></script></html>