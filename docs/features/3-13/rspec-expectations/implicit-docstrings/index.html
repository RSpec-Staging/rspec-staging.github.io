<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]<!--><html class="no-js" lang="en"><!--<![endif]--><head><meta charset="UTF-8" /><meta content="width=device-width, initial-scale=1" name="viewport" /><meta property="og:title" /><meta content="https://rspec.info/features/3-13/rspec-expectations/implicit-docstrings/" property="og:url" /><meta content="https://rspec.info/images/logo_ogp.png" property="og:image" /><meta content="summary" name="twitter:card" /><meta content="@rspec" name="twitter:site" /><title></title><link href="/stylesheets/pages/features.css" rel="stylesheet" /><link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" /><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet" type="text/css" /><link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css" /><link href="/blog/feed.xml" rel="alternate" type="application/atom+xml" /></head><body class="features"><header><nav><h1><img src="/images/logo.png" alt="Logo" /><a href="/">RSpec</a></h1><input class="hamburger-toggle" type="checkbox" /><div class="hamburger-icon"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div><ul class="menu"><li><a href="/about">About</a></li><li><a href="/documentation">Documentation</a></li><li><a href="/blog">Blog</a></li><li><a href="/upgrading-from-rspec-2">Upgrade</a></li><li><a href="/help">Get Help</a></li><li><a href="/contributing">Contributing</a></li></ul></nav></header><nav class="top-nav-bar" role="navigation"><ul><li>Library:</li><li><a class="title" href="/features/3-13/rspec-expectations">RSpec Expectations</a><ul aria-haspopup="true" aria-label="submenu"><li><a href="/features/3-13/rspec-core">RSpec Core</a></li><li class="current"><a href="/features/3-13/rspec-expectations">RSpec Expectations</a></li><li><a href="/features/3-13/rspec-mocks">RSpec Mocks</a></li><li><a href="/features/6-1/rspec-rails">RSpec Rails</a></li></ul></li><li>Version:</li><li><a class="title" href="/features/3-13/rspec-expectations">3.13</a><ul aria-haspopup="true" aria-label="submenu"><li><a href="/features/3-12/rspec-expectations">3.12</a></li><li class="current"><a href="/features/3-13/rspec-expectations">3.13</a></li></ul></li></ul></nav><section><nav><ul><li><a href="/features/3-13/rspec-expectations/built-in-matchers/">Built in matchers</a><ul><li><a href="/features/3-13/rspec-expectations/built-in-matchers/equality/"> Equality matchers</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/comparisons/"> Comparison matchers</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/predicates/"> Predicate matchers</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/types/"> Type matchers</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/all/"> `all` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/be/"> `be` matchers</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/be-within/"> `be_within` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/exist/"> `exist` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/change/"> `change` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/contain-exactly/"> `contain_exactly` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/cover/"> `cover` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/end-with/"> `end_with` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/exist/"> `exist` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/have-attributes/"> `have_attributes` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/include/"> `include` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/match/"> `match` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/raise-error/"> `raise_error` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/respond-to/"> `respond_to` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/satisfy/"> `satisfy` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/start-with/"> `start_with` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/throw-symbol/"> `throw_symbol` matcher</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/yield/"> `yield` matchers</a></li><li><a href="/features/3-13/rspec-expectations/built-in-matchers/output/"> `output` matcher</a></li></ul></li><li><a href="/features/3-13/rspec-expectations/custom-matchers/">Custom matchers</a><ul><li><a href="/features/3-13/rspec-expectations/custom-matchers/define-matcher/"> Defining a custom matcher</a></li><li><a href="/features/3-13/rspec-expectations/custom-matchers/define-diffable-matcher/"> Defining a diffable matcher</a></li><li><a href="/features/3-13/rspec-expectations/custom-matchers/define-matcher-with-fluent-interface/"> Defining a matcher with fluent interface</a></li><li><a href="/features/3-13/rspec-expectations/custom-matchers/access-running-example/"> Access the running example</a></li><li><a href="/features/3-13/rspec-expectations/custom-matchers/define-matcher-outside-rspec/"> Defining a matcher outside rspec</a></li><li><a href="/features/3-13/rspec-expectations/custom-matchers/define-block-matcher/"> Defining a matcher supporting block expectations</a></li></ul></li><li><a href="/features/3-13/rspec-expectations/aggregating-failures/">Aggregating failures</a></li><li><a href="/features/3-13/rspec-expectations/composing-matchers/">Composing matchers</a></li><li><a href="/features/3-13/rspec-expectations/compound-expectations/">Compound expectations</a></li><li><a href="/features/3-13/rspec-expectations/define-negated-matcher/">Define negated matcher</a></li><li><a href="/features/3-13/rspec-expectations/customized-message/">Customized message</a></li><li><a href="/features/3-13/rspec-expectations/diffing/">Diffing</a></li><li><a href="/features/3-13/rspec-expectations/implicit-docstrings/">Implicit docstrings</a></li><li><a href="/features/3-13/rspec-expectations/syntax-configuration/">Syntax configuration</a></li><li><a href="/features/3-13/rspec-expectations/test-frameworks/">Test frameworks</a><ul><li><a href="/features/3-13/rspec-expectations/test-frameworks/minitest/"> Minitest integration</a></li></ul></li></ul></nav><article><h1>Implicit docstrings</h1>

<p>When you use rspec-expectations with rspec-core, RSpec is able to auto-generate the
  docstrings for examples for you based on the last expectation in the example. This can be
  handy when the matcher expresses exactly what you would write in your example docstring,
  but it can also be easily abused. We find that the freeform nature of the docstring provides
  a lot of value when used well (e.g. to document the &ldquo;why&rdquo; of a particular behavior), and you
  lose that kind of flexibility when you rely on the matcher to generate the docstring for you.</p>

<p>In general, we recommend only using this feature when the matcher aligns <em>exactly</em> with the
  docstring you would write. Even then, many users prefer the explicitness of the full
  docstring, so use this feature with care (if at all).</p>

<h2>Run passing examples</h2>

<p><em>Given</em> a file named &ldquo;implicit<em>docstrings</em>spec.rb&rdquo; with:</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="s2">"Examples with no docstrings generate their own:"</span> <span class="k">do</span>
  <span class="n">specify</span> <span class="p">{</span> <span class="n">expect</span><span class="p">(</span><span class="mi">3</span><span class="p">).</span><span class="nf">to</span> <span class="n">be</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="p">}</span>
  <span class="n">specify</span> <span class="p">{</span> <span class="n">expect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]).</span><span class="nf">to</span> <span class="kp">include</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">specify</span> <span class="p">{</span> <span class="n">expect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]).</span><span class="nf">to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:size</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<p><em>When</em> I run <code>rspec ./implicit_docstrings_spec.rb -fdoc</code></p>

<p><em>Then</em> the output should contain &ldquo;is expected to be &lt; 5&rdquo;</p>

<p><em>And</em> the output should contain &ldquo;is expected to include 2&rdquo;</p>

<p><em>And</em> the output should contain &ldquo;is expected to respond to #size&rdquo;.</p>

<h2>Run failing examples</h2>

<p><em>Given</em> a file named &ldquo;failing<em>implicit</em>docstrings_spec.rb&rdquo; with:</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="s2">"Failing examples with no descriptions"</span> <span class="k">do</span>
  <span class="c1"># description is auto-generated per the last executed expectation</span>
  <span class="n">specify</span> <span class="k">do</span>
    <span class="n">expect</span><span class="p">(</span><span class="mi">3</span><span class="p">).</span><span class="nf">to</span> <span class="n">equal</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">expect</span><span class="p">(</span><span class="mi">5</span><span class="p">).</span><span class="nf">to</span> <span class="n">equal</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">specify</span> <span class="p">{</span> <span class="n">expect</span><span class="p">(</span><span class="mi">3</span><span class="p">).</span><span class="nf">to</span> <span class="n">be</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="p">}</span>
  <span class="n">specify</span> <span class="p">{</span> <span class="n">expect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]).</span><span class="nf">to</span> <span class="kp">include</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">specify</span> <span class="p">{</span> <span class="n">expect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]).</span><span class="nf">not_to</span> <span class="n">respond_to</span><span class="p">(</span><span class="ss">:size</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<p><em>When</em> I run <code>rspec ./failing_implicit_docstrings_spec.rb -fdoc</code></p>

<p><em>Then</em> the output should contain &ldquo;is expected to equal 2&rdquo;</p>

<p><em>And</em> the output should contain &ldquo;is expected to be &gt; 5&rdquo;</p>

<p><em>And</em> the output should contain &ldquo;is expected to include 4&rdquo;</p>

<p><em>And</em> the output should contain &ldquo;is expected not to respond to #size&rdquo;.</p>
</article></section><footer><div>Created with the assistance of Ninefold<img src="/images/brutus-half.png" alt="Brutus" /></div><br /><a href="https://dnsimple.link/resolving-rspec" target="_blank">Resolving with<br /><img src="https://cdn.dnsimple.com/assets/resolving-with-us/logo-dark.png" alt="DNSimple" style="width:100px;" /></a></footer></body><script src="/javascripts/asciinema-player.js"></script></html>